<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Records</title>
</head>

<body>
	<header>

		<h1>Hello, world!</h1>

		<a href="test.html">Test site</a>

		<p>
			<select onChange="updateList(this.value)">
				<option value="Madness">Madness</option>
				<option value="Blondie">Blondie</option>
			</select>
		</p>

	</header>

	<div id="xml" data-xml="records.xml" data-xslt="param.xslt" data-xsl-params='[{ "name" : "title", "value": "Madness" }]'></div>

	<footer>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script type="text/javascript" src="m-xml.js"></script>
		<script>
			$('document').ready(function() {
				console.log('run parse');
			var domElement = $("div")[0] // [0] returns the first DOM element that jQuery found
			$(domElement.attributes).each(function(index, attribute) {
				console.log("Attribute:"+attribute.nodeName+" | Value:"+attribute.nodeValue);
			});
			magicXML.parse("#xml");
		});

			function updateList(value) {
				window.console.log(value);
				console.log('foo');
				$( '#xml' ).attr('data-xsl-params', '[{ "name" : "title", "value": "' + value + '" }]');
				magicXML.transformAndReplace("#xml","records.xml","param.xslt",[{ "name" : "title", "value": value }]);
			};
		</script>
	</footer>

</body>

</html>